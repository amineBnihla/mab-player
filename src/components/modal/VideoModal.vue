<template>
  <div
    class="
      min-h-[400px]
      z-30
      bg-slate-200
      w-[700px]
      max-w-[90%]
      fixed
      top-1/2
      left-1/2
      -translate-x-1/2 -translate-y-1/2
      rounded-xl
      flex flex-col
    "
  >
    <slot></slot>
    <div
      class="player_video overflow-hidden rounded-xl"
      v-html="results.player.embedHtml"
    ></div>
    <div
      class="video_info py-5 px-10 flex justify-center items-center flex-grow"
    >
      <div class="statistics flex flex-wrap justify-center gap-4">
        <div
          class="
            views
            text-lg
            py-2
            px-4
            rounded-lg
            shadow-md
            flex
            items-center
            gap-5
            bg-slate-100
          "
        >
          <svg
            width="22"
            height="14"
            viewBox="0 0 22 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21.4134 6.68667C19.1667 2.53334 15.2267 0.0200043 10.8667 0.0200043C6.50673 0.0200043 2.56006 2.53334 0.333395 6.68667L0.146729 7L0.320062 7.32C2.56673 11.4733 6.50673 13.9867 10.8667 13.9867C15.2267 13.9867 19.1734 11.5067 21.4134 7.32L21.5867 7L21.4134 6.68667ZM10.8667 12.62C7.1134 12.62 3.66673 10.5267 1.66673 7C3.66673 3.47334 7.1134 1.38 10.8667 1.38C14.6201 1.38 18.0267 3.48 20.0601 7C18.0267 10.5267 14.6134 12.62 10.8667 12.62V12.62Z"
              fill="#2D3144"
            />
            <path
              d="M11.06 2.44667C10.1561 2.45327 9.27436 2.72759 8.52626 3.23499C7.77815 3.74239 7.19719 4.46011 6.85676 5.2975C6.51632 6.13489 6.43167 7.05438 6.61351 7.93985C6.79534 8.82532 7.23551 9.63704 7.8784 10.2725C8.5213 10.9079 9.33809 11.3386 10.2256 11.5101C11.1131 11.6817 12.0316 11.5863 12.865 11.2361C13.6983 10.886 14.4092 10.2967 14.9079 9.54273C15.4065 8.78877 15.6706 7.90394 15.6666 7C15.664 6.39829 15.5427 5.80302 15.3096 5.24828C15.0765 4.69355 14.7363 4.19027 14.3083 3.76727C13.8804 3.34428 13.3731 3.0099 12.8157 2.78328C12.2583 2.55667 11.6617 2.44228 11.06 2.44667V2.44667ZM11.06 10.26C10.4215 10.2534 9.79916 10.0583 9.27119 9.69921C8.74321 9.3401 8.33311 8.83299 8.09241 8.24156C7.8517 7.65014 7.79111 7.00078 7.91825 6.37504C8.0454 5.74929 8.3546 5.17507 8.80703 4.72448C9.25946 4.27389 9.83494 3.96703 10.4612 3.84245C11.0875 3.71786 11.7366 3.7811 12.327 4.02422C12.9174 4.26734 13.4229 4.6795 13.7798 5.20894C14.1368 5.73838 14.3293 6.36149 14.3333 7C14.3351 7.42974 14.2515 7.85555 14.0875 8.25274C13.9235 8.64994 13.6822 9.01062 13.3777 9.31387C13.0732 9.61712 12.7116 9.8569 12.3137 10.0193C11.9158 10.1817 11.4897 10.2635 11.06 10.26V10.26Z"
              fill="#2D3144"
            />
          </svg>

          {{ results.statistics.viewCount }}
        </div>
        <div
          class="
            likes
            text-lg
            py-2
            px-4
            rounded-lg
            shadow-md
            flex
            items-center
            gap-5
            bg-slate-100
          "
        >
          <svg
            width="24"
            height="23"
            viewBox="0 0 24 23"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.9998 4.12201L10.9243 3.01651C8.39984 0.421512 3.77084 1.31701 2.09984 4.57951C1.31534 6.11401 1.13834 8.32951 2.57084 11.157C3.95084 13.8795 6.82184 17.1405 11.9998 20.6925C17.1778 17.1405 20.0473 13.8795 21.4288 11.157C22.8613 8.32801 22.6858 6.11401 21.8998 4.57951C20.2288 1.31701 15.5998 0.420012 13.0753 3.01501L11.9998 4.12201ZM11.9998 22.5C-10.9997 7.30201 4.91834 -4.55999 11.7358 1.71451C11.8258 1.79701 11.9143 1.88251 11.9998 1.97101C12.0845 1.88259 12.1725 1.79753 12.2638 1.71601C19.0798 -4.56299 34.9993 7.30051 11.9998 22.5Z"
              fill="#2D3144"
            />
          </svg>

          {{ results.statistics.likeCount }}
        </div>
        <div
          class="
            comments
            text-lg
            py-2
            px-4
            rounded-lg
            shadow-md
            flex
            items-center
            gap-5
            bg-slate-100
          "
        >
          <svg
            width="22"
            height="20"
            viewBox="0 0 22 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.5 3.75C0.5 2.75544 0.895088 1.80161 1.59835 1.09835C2.30161 0.395088 3.25544 0 4.25 0H17.75C18.7446 0 19.6984 0.395088 20.4017 1.09835C21.1049 1.80161 21.5 2.75544 21.5 3.75V11.25C21.5 11.7425 21.403 12.2301 21.2145 12.6851C21.0261 13.14 20.7499 13.5534 20.4017 13.9017C20.0534 14.2499 19.64 14.5261 19.1851 14.7145C18.7301 14.903 18.2425 15 17.75 15H12.032L7.4375 19.02C7.22491 19.2059 6.96328 19.3265 6.68391 19.3676C6.40454 19.4087 6.11925 19.3685 5.86214 19.2517C5.60504 19.1349 5.38701 18.9466 5.23412 18.7092C5.08123 18.4718 4.99995 18.1954 5 17.913V15H4.25C3.25544 15 2.30161 14.6049 1.59835 13.9017C0.895088 13.1984 0.5 12.2446 0.5 11.25V3.75ZM4.25 1.5C3.65326 1.5 3.08097 1.73705 2.65901 2.15901C2.23705 2.58097 2 3.15326 2 3.75V11.25C2 11.8467 2.23705 12.419 2.65901 12.841C3.08097 13.2629 3.65326 13.5 4.25 13.5H6.5V17.847L11.468 13.5H17.75C18.3467 13.5 18.919 13.2629 19.341 12.841C19.7629 12.419 20 11.8467 20 11.25V3.75C20 3.15326 19.7629 2.58097 19.341 2.15901C18.919 1.73705 18.3467 1.5 17.75 1.5H4.25Z"
              fill="#2D3144"
            />
          </svg>

          {{ results.statistics.commentCount || 0 }}
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { api } from "@/api";
import { defineProps, ref } from "vue";
const props = defineProps(["video_id"]);
const results = ref([]);

await api
  .get(
    `videos?part=player%2Cstatistics&id=${props.video_id}&key=${process.env.VUE_APP_API_KEY}`
  )
  .then((res) => {
    results.value = res.data.items[0];
    console.log(results.value);
    results.value.player.embedHtml = results.value.player.embedHtml.replace(
      /(width|height)="\d+"/g,
      "class='w-full aspect-video'"
    );
  });
</script>

<style>
</style>